<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Migration to New SDKs · Kin SDK Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="This section of the documentation is for developers of previously approved Kin apps and outlines some key changes from previously offered SDKs. "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Migration to New SDKs · Kin SDK Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.kin.org/"/><meta property="og:description" content="This section of the documentation is for developers of previously approved Kin apps and outlines some key changes from previously offered SDKs. "/><meta property="og:image" content="https://docs.kin.org/img/kin.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.kin.org/img/kin.svg"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-136101659-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo-clear-k.svg" alt="Kin SDK Docs"/><h2 class="headerTitleWithLogo">Kin SDK Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://www.kin.org/developers" target="_self">Developers</a></li><li class=""><a href="https://www.kin.org/developers/features" target="_self">Build</a></li><li class=""><a href="https://www.kin.org/developers/downloads" target="_self">Downloads</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Overview</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/intro">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/kin-architecture-overview">Kin Architecture Overview</a></li><li class="navListItem"><a class="navItem" href="/how-it-works">How It Works</a></li><li class="navListItem"><a class="navItem" href="/app-registration">App Registration</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/sdk-migration">Migration to New SDKs</a></li><li class="navListItem"><a class="navItem" href="/solana">Solana</a></li><li class="navListItem"><a class="navItem" href="/terms-and-concepts">Terms &amp; Concepts</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Agora<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/agora/api">Agora API Reference</a></li><li class="navListItem"><a class="navItem" href="/agora/webhook">Agora Webhook Reference</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Android<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/android/sdk">Android SDK</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">iOS<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/ios/sdk">iOS SDK</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Go<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/go/sdk">Go SDK</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Python<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/python/sdk">Python SDK</a></li><li class="navListItem"><a class="navItem" href="/python/api">Python API reference</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Node.js<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/nodejs/sdk">Node.js SDK</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Deprecated<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Android</h4><ul><li class="navListItem"><a class="navItem" href="/deprecated/android/hi-kin">Hello World Android</a></li><li class="navListItem"><a class="navItem" href="/deprecated/android/sdk">Kin SDK for Android</a></li><li class="navListItem"><a class="navItem" href="/deprecated/android/api">Android API reference</a></li><li class="navListItem"><a class="navItem" href="/deprecated/android/modules/backup-restore">Backup/Restore Module for Android</a></li><li class="navListItem"><a class="navItem" href="/deprecated/android/modules/discovery">Discovery Module for Android</a></li><li class="navListItem"><a class="navItem" href="/deprecated/android/modules/sendkin">Send Kin Module for Android</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">iOS</h4><ul><li class="navListItem"><a class="navItem" href="/deprecated/ios/hi-kin">Hello World iOS</a></li><li class="navListItem"><a class="navItem" href="/deprecated/ios/sdk">Kin SDK for iOS</a></li><li class="navListItem"><a class="navItem" href="/deprecated/ios/api">iOS API reference</a></li><li class="navListItem"><a class="navItem" href="/deprecated/ios/modules/backup-restore">Backup/Restore Module for iOS</a></li><li class="navListItem"><a class="navItem" href="/deprecated/ios/modules/appreciation-options-menu">Appreciation Module &#x27;Options Menu&#x27; for iOS</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Unity</h4><ul><li class="navListItem"><a class="navItem" href="/deprecated/unity/hi-kin">Hello World Unity</a></li><li class="navListItem"><a class="navItem" href="/deprecated/unity/sdk">Kin SDK for Unity</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Python</h4><ul><li class="navListItem"><a class="navItem" href="/deprecated/python/hi-kin">Hello World Python</a></li><li class="navListItem"><a class="navItem" href="/deprecated/python/sdk">Kin SDK for Python</a></li><li class="navListItem"><a class="navItem" href="/deprecated/python/bootstrap">Kin Python Bootstrap</a></li><li class="navListItem"><a class="navItem" href="/deprecated/python/api">Python API reference</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Node.js</h4><ul><li class="navListItem"><a class="navItem" href="/deprecated/nodejs/hi-kin">Hello World Node.js</a></li><li class="navListItem"><a class="navItem" href="/deprecated/nodejs/sdk">Kin SDK for Node.js</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/kinecosystem/kin-website-docs/tree/master/docs/sdk-migration.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Migration to New SDKs</h1></header><article><div><span><p>This section of the documentation is for developers of previously approved Kin apps and outlines some key changes from previously offered SDKs.</p>
<h2><a class="anchor" aria-hidden="true" id="memo-format-and-app-index"></a><a href="#memo-format-and-app-index" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Memo Format and App Index</h2>
<p>Previously, approved apps were given app IDs to include inside their transactions using a text memo, which has a max length of 28 bytes. The memo format used was <code>1-{app_id}-{other_data}</code>, where <code>app_id</code> consisted of 3-4 UTF-8 characters (limited to digits and upper/lowercase letters. This format took up 6-7 bytes in total, leaving developers with only 21-22 bytes for additional data.</p>
<p>To address the limitation of how much &quot;extra data&quot; can be attached to a transaction, Agora uses a new <a href="/how-it-works#kin-binary-memo-format">memo format</a>. Instead of text memos, hash memos are used, which have a slightly larger max size of 32 bytes. The new format contains the following fields:</p>
<ul>
<li>Version: the memo encoding version (primarily used by the SDKs for interpreting memos).</li>
<li>Transaction Type: the 'type' of the transaction the memo is embedded in.</li>
<li>App Index: a 16-bit value that refers to the app the transaction is related to. Replaces app IDs.</li>
<li>Foreign Key: the identifier in an auxiliary transaction service that contains metadata about what a transaction is for.</li>
</ul>
<p>Similar to the app IDs of the past, the <strong>app index</strong> field, in conjunction with <strong>transaction type</strong> field, will be used for KRE reward calculations. However, it is also used by Agora to route <a href="/how-it-works#webhooks">webhooks</a> requests based on app. Instead of the UTF-8 app ID, registered apps will be issued a numeric app index that they can include in their transaction memos.</p>
<p><strong>Note: To assist with migration, previously approved apps will have app indices pre-generated for them. Additionally, Agora will support routing transactions of previously-approved apps containing the old memo format to any configured <a href="/how-it-works#webhooks">webhooks</a>.</strong></p>
<p>The new <strong>foreign key</strong> field primarily serves as a way for apps to include a reference to some other data stored off-chain, to help address memo space limitations. This field has a max limit of 230 bits. One option available to developers for storing off-chain data is <a href="/how-it-works#invoices">invoices</a>, which can help developers provide their users with richer transaction data and history. However, developers are free to use the foreign key to reference data hosted by their own services.</p>
<h2><a class="anchor" aria-hidden="true" id="signing-transactions-with-whitelisted-accounts"></a><a href="#signing-transactions-with-whitelisted-accounts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Signing Transactions with Whitelisted Accounts</h2>
<p>Approved/registered apps typically have their app account &quot;whitelisted&quot;, which makes their account's transactions and any transactions signed by their operation account feeless. The previous process for submitting a transaction without a fee required app mobile clients to oversee the process from start to finish, making requests to both their app backend server and Horizon to ensure a given transaction went through:</p>
<ol>
<li>The client builds a transaction.</li>
<li>The client signs the transaction with its account's private key and sends the transaction to the backend server.</li>
<li>The app account signs the transaction to make it feeless.</li>
<li>The app backend server returns the transaction to the client account.</li>
<li>The client sends the transaction to the blockchain.</li>
<li>The blockchain verifies the transaction against the corresponding blockchain account and processes it.</li>
<li>The specified amount of Kin is deducted from the sending account’s balance and added to the destination account’s balance.</li>
<li>A transaction ID is returned to the client.</li>
</ol>
<p>Typically, to action on a completed transaction, either the backend server would handle monitoring the transaction after signing it, or the client would make another request the app backend server containing the transaction ID after it completes.</p>
<p>However, mobile clients can be unreliable for ensuring the whole transaction process completes (due to unstable internet connection, users closing the app, etc.). Agora introduces a new <a href="/how-it-works#sign-transaction">Sign Transaction webhook</a> that apps can configure, so that mobile clients are no longer relied upon for submitting the transaction. With this webhook, the process for sending a feeless transaction is as follows:</p>
<ol>
<li>The client builds a transaction.</li>
<li>The client signs the transaction with its private key and sends it to Agora. The transaction contains the app's <a href="/app-registration">registered app index</a> in the memo.</li>
<li>Agora uses the app index to identify which app the transaction is from and makes a request to the app's <a href="/app-registration#configurable-options">configured Sign Transaction URL</a> with the submitted transaction in the request body.</li>
<li>The app backend server verifies the contents of the transaction (e.g. that the sender, destination and amounts are valid) before either signing the transaction with their app account and responding with the signed transaction, or responding with a rejection.</li>
<li>Agora submits the transaction to the blockchain and responds or responds to the SubmitTransaction request with the provided rejection.</li>
</ol>
<p>This, in conjunction with backend server transaction monitoring, allows the transaction process to happen almost entirely on the backend between Agora and the app backend server. Developers can refer to the <a href="/agora/webhook">Webhook Reference</a> for implementation details.</p>
<h2><a class="anchor" aria-hidden="true" id="transaction-monitoring"></a><a href="#transaction-monitoring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Transaction Monitoring</h2>
<p>In the past, developers were not provided with a way for their backend servers to get notified of transactions completing. Developers often had to resort to two different ways of monitoring their users' transactions. Typically, this would involve pre-computing transaction hashes, then either:</p>
<ul>
<li>periodically fetching the transaction from Horizon to see its status, or</li>
<li>streaming all completed transactions from Horizon and waiting for a transaction with a specific hash to complete.</li>
</ul>
<p>To address this, Agora introduces a new <a href="/how-it-works#events">Events webhook</a> that apps can configure. With this webhook, apps no longer need to monitor completed transactions themselves. Instead, Agora handles monitoring the blockchain for all completed transactions, then uses the app index inside the transaction memo to make a request to the app's <a href="/app-registration#configurable-options">configured Events URL</a> with hashes of completed transactions (in Kin 3, the full transaction envelope XDR is also included).</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2020-8-17</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/app-registration"><span class="arrow-prev">← </span><span>App Registration</span></a><a class="docs-next button" href="/solana"><span>Solana</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#memo-format-and-app-index">Memo Format and App Index</a></li><li><a href="#signing-transactions-with-whitelisted-accounts">Signing Transactions with Whitelisted Accounts</a></li><li><a href="#transaction-monitoring">Transaction Monitoring</a></li></ul></nav></div><footer id="footer"><section class="content"><div id="footer-logo"><a href="/"><img src="/img/logo-black-k.svg" alt="Kin SDK Docs" width="53" height="53"/></a></div><div id="footer-col-1" class="footer-links"><h4>Docs</h4><a href="/kin-architecture-overview">Introduction</a><a href="/android/sdk">Android</a><a href="/ios/sdk">iOS</a><a href="/unity/sdk">Unity</a><a href="/python/sdk">Python</a><a href="/nodejs/sdk">Node.js</a></div><div id="footer-col-2" class="footer-links"><h4>Resources</h4><a href="https://www.kin.org/developers/downloads">Downloads</a><a href="https://www.kin.org/developers/guidelines.pdf" target="_blank">Guidelines</a></div><div id="footer-col-3" class="footer-links"><h4>Community</h4><a href="https://www.kin.org/developers/events/">Events</a></div><div id="footer-social"><a href="https://twitter.com/kin_foundation" target="_blank" rel="noreferrer noopener"><img src="/img/linkedin.svg" alt="LinkedIn" width="29" height="29"/></a><a href="https://www.reddit.com/r/KinFoundation/" target="_blank" rel="noreferrer noopener"><img src="/img/reddit.svg" alt="Reddit" width="29" height="29"/></a><a href="https://medium.com/kinblog" target="_blank" rel="noreferrer noopener"><img src="/img/medium.svg" alt="Medium" width="29" height="29"/></a></div><div id="footer-privacy"><a href="https://www.kin.org/privacy-policy.pdf" target="_blank">Privacy policy</a><a href="https://www.kin.org/terms-and-conditions.pdf" target="_blank">Terms and conditions</a></div><div id="footer-copyright">© 2021 Kin Foundation</div></section></footer></div></body></html>